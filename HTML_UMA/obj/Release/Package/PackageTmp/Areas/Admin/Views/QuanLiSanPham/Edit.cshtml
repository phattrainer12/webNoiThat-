@model HTML_UMA.Models.Product

@{
    ViewBag.Title = "Edit";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
    var smallimage = ViewBag.SmallImage as IEnumerable<HTML_UMA.Models.LinkImage>;
}

<div class="text-center">
    <h2>Tạo sản phẩm</h2>
</div>

@using (Html.BeginForm(null, null, FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group">
            <label class="control-label col-md-2">Mã sản phẩm:</label>
            <div class="col-md-10">
                <input name="pro_ID" type="hidden" value="@Model.pro_ID" />
                @Html.EditorFor(model => model.pro_code, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.pro_code, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2">Danh mục:</label>
            <div class="col-md-10">
                @Html.DropDownList("Menu_ID", null, htmlAttributes: new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.Menu_ID, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2">Nhóm sản phẩm:</label>
            <div class="col-md-10">
                @Html.DropDownList("group_ID", null, htmlAttributes: new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.group_ID, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2">Tên sản phẩm:</label>
            <div class="col-md-10">
                @Html.EditorFor(model => model.pro_Name, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.pro_Name, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2">Giá:</label>
            <div class="col-md-10">
                @Html.EditorFor(model => model.pro_price, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.pro_price, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2">Số lượng:</label>
            <div class="col-md-10">
                @Html.EditorFor(model => model.pro_Quanty, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.pro_Quanty, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2">Mô tả:</label>
            <div class="col-md-10">
                @Html.EditorFor(model => model.pro_Description, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.pro_Description, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2">Hình ảnh:</label>
            <div class="col-md-10">
                <img src="@Model.pro_Image" width="60" height="60" />
                <input name="pro_Image" value="@Model.pro_Image" type="hidden" />
                <input name="Image" type="file" />
                @Html.ValidationMessageFor(model => model.pro_Image, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2">Chất liệu:</label>
            <div class="col-md-10">
                @Html.EditorFor(model => model.pro_Materials, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.pro_Materials, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2">Màu sắc:</label>
            <div class="col-md-10">
                @Html.DropDownList("Color_ID", null, htmlAttributes: new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.Color_ID, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-12">Kích thước (VD:Sâu 15cm, Ngang 18cm, Rộng 20cm ):</label>
            <div class="col-md-10">
                @Html.EditorFor(model => model.pro_Size, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.pro_Size, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2">Nhà thiết kế:</label>
            <div class="col-md-10">
                @Html.EditorFor(model => model.pro_Designer, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.pro_Designer, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2">Nguồn gốc:</label>
            <div class="col-md-10">
                @Html.EditorFor(model => model.pro_Source, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.pro_Source, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2">Hướng dẫn:</label>
            <div class="col-md-10">
                @Html.EditorFor(model => model.pro_Instruction, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.pro_Instruction, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2">Ghi chú:</label>
            <div class="col-md-10">
                @Html.EditorFor(model => model.note, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.note, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2">Đơn vị:</label>
            <div class="col-md-10">
                @Html.DropDownList("OptionID", null, htmlAttributes: new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.OptionID, "", new { @class = "text-danger" })
            </div>
        </div>
        <br />
        <div class="form-group">
            <h4 class="control-label col-md-12">Hình ảnh chi tiết cho sản phẩm:</h4>
            <div class="row">
                @if (smallimage.Count() != 0)
                {
                    <div class="col-md-6">
                        @foreach (var image in smallimage)
                        {

                            <div class="delete-small-image">
                                <img class="small-image" src="@image.link_ImageSmall" width="80" height="80" />
                                <i class="fa fa-ban change-image" data-small-image-id="@Model.pro_ID" title="thay đổi hình ảnh"></i>
                            </div>

                        }
                    </div>
                    <div class="col-md-6 function">
                        <div class="Create-delete">
                            <input type="hidden" name="DeleteSmallImage"/>
                            <input type="button" value="Xóa" id="remove">
                            <input type="button" value="Hủy xóa" id="undo">
                        </div>
                        <div class="update">
                            <input type="button" id="update-image" value="Cập Nhật hình ảnh">
                            <div class="update-form">
                                <p>Chon tối đa 5 tệp hình ảnh</p>
                                <input name="moreimage" type="file" multiple />
                                @Html.ValidationMessageFor(model => model.pro_Image, "", new { @class = "text-danger" })
                            </div>
                        </div>
                    </div>
                }
                else
                {
                    <div class="col-md-12">
                        <p>Chon tối đa 5 tệp hình ảnh</p>
                        <input type="hidden" name="DeleteSmallImage" value="false" />
                        <input name="moreimage" type="file" multiple />
                        @Html.ValidationMessageFor(model => model.pro_Image, "", new { @class = "text-danger" })
                    </div>
                }
                <style>
                    .delete-small-image {
                        display: inline-block;
                        position: relative;
                        margin-right: 5px;
                        border: 0.5px solid #808080;
                    }

                    .change-image {
                        position: absolute;
                        top: 0;
                        right: 0;
                        margin-left: 10px;
                        color: red;
                        background-color: #FFF;
                        opacity: 0;
                        vertical-align: middle;
                    }
                    .function{
                        display: flex;
                    }
                    .update {
                        
                        margin-left: 20px;
                    }
                    .update-form{
                        display: none;
                    }
                </style>
            </div>
            </div>

        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Lưu" class="btn btn-default" />
            </div>
        </div>

}

<div>
    @Html.ActionLink("Trở về", "Index")
</div>
<script>
    $('.change-image').click(function () {
        $(this).parents('.item-image').find('.change-small-image').css("display", "inline-block");
    })
    $('#update-image').click(function () {
        $('.update-form').css("display", "block");
    })
    $('#remove').click(function () {
        $('input[name="DeleteSmallImage"]').val("true");
        $('.change-image').addClass('opa9');
    })
    $('#undo').click(function () {
        $('input[name="DeleteSmallImage"]').val("false");
        $('.change-image').removeClass('opa9');
    })
</script>
